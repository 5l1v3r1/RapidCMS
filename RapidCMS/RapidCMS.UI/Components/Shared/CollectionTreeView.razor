@using RapidCMS.Common.Models.DTOs

@if (Collection == null)
{
    <li>Loading tree..</li>
}
else if (Collection.RootVisible)
{
    <li class="nav-item px-3">
        @if (Collection.Path.Count == 1)
        {
            var path = Collection.Path.First().Path;
            var icon = Collection.Path.First().Icon;

            <NavLink href=@path class=@(path == CurrentUrl ? "current-page" : "")><i class="oi oi-@icon"></i> @Collection.Name</NavLink>
        }
        else
        {
            <div>
                @foreach (var path in Collection.Path)
                {
                    <NavLink href=@path.Path class=@(path.Path == CurrentUrl ? "current-page" : "")><i class="oi oi-@path.Icon"></i> @Collection.Name</NavLink>
                }
            </div>
        }

        @if (Collection.Nodes != null)
        {
            <CollectionTreeList Nodes="@Collection.Nodes" CurrentUrl="@CurrentUrl" />
        }
    </li>
}
else
{
    @if (Collection.Nodes != null)
    {
        <CollectionTreeList Nodes="@Collection.Nodes" CurrentUrl="@CurrentUrl" />
    }
}

@functions {
#nullable enable

    [Parameter]
    private CollectionTreeCollectionDTO? Collection { get; set; }

    [Parameter]
    private string? ParentId { get; set; } = null;

    [Parameter]
    private string CurrentUrl { get; set; }
}
