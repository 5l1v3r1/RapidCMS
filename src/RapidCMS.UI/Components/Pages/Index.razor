@page "/"

@layout MainLayout

@inject IDashboard Dashboard

@foreach (var section in Dashboard.CustomDashboardSectionRegistrations)
{
    @RenderType(section);
}

@code {
    RenderFragment RenderType(ITypeRegistration section)
    {
        return builder =>
        {
            var type = section.Type == typeof(ICollectionConfig)
                ? typeof(Collection)
                : section.Type;

            builder.OpenComponent(0, type);

            if (section.Parameters != null)
            {
                var index = 1;
                section.Parameters.ForEach(kv =>
                {
                    builder.AddAttribute(index++, kv.Key, kv.Value);
                });
            }

            builder.CloseComponent();
        };
    }
}